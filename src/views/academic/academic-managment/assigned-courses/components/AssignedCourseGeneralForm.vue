<template>
  <div v-loading="loading" class="mt-4">
    <div class="flex items-center justify-between mb-8">
      <div class="flex flex-col gap-3">
        <h1 class="font-semibold text-xl">Main course</h1>
        <p class="text-tertiary-600 font-normal">
          Update your company photo and details here.
        </p>
      </div>
    </div>
    <div>
      <div class="grid grid-cols-5 gap-2">
        <h1 class="font-semibold">Course name</h1>
        <h1 class="text-base">{{ course.title }}</h1>
      </div>
      <el-divider />
      <div class="grid grid-cols-5 gap-2">
        <h1 class="font-semibold">Course code</h1>
        <h1 class="text-base">{{ course.code }}</h1>
      </div>
      <el-divider />
    </div>
    <div>
      <div class="grid grid-cols-5 gap-2" v-if="!course.has_retake">
        <h1 class="font-semibold">Retake course code</h1>
        <div>
          <el-button @click="$emit('activateRetake')"
            ><svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18.7006 5.47682C18.6385 5.2829 18.5201 5.1118 18.3606 4.98523C18.2011 4.85866 18.0075 4.78232 17.8045 4.76589L14.8967 4.51979L13.7624 1.87526C13.6823 1.68987 13.5497 1.53196 13.381 1.42103C13.2122 1.31009 13.0147 1.25098 12.8128 1.25098C12.6108 1.25098 12.4133 1.31009 12.2445 1.42103C12.0758 1.53196 11.9432 1.68987 11.8631 1.87526L10.7288 4.52057L7.82017 4.76589C7.61821 4.78211 7.42557 4.85778 7.26656 4.98336C7.10754 5.10893 6.98928 5.27879 6.92669 5.47149C6.8641 5.6642 6.85998 5.87113 6.91485 6.06617C6.96972 6.26122 7.08113 6.43564 7.23502 6.56745L9.43501 8.44245L8.77642 11.2339C8.73012 11.4295 8.74247 11.6345 8.81194 11.8232C8.88141 12.0118 9.00492 12.1759 9.16705 12.2948C9.33109 12.4153 9.527 12.4847 9.73029 12.4944C9.93358 12.5041 10.1352 12.4537 10.31 12.3495L12.81 10.8651L15.31 12.3495C15.4848 12.4537 15.6865 12.5041 15.8897 12.4944C16.093 12.4847 16.2889 12.4153 16.453 12.2948C16.6152 12.1759 16.7388 12.0119 16.8082 11.8232C16.8777 11.6345 16.89 11.4295 16.8436 11.2339L16.185 8.44245L18.3842 6.56745C18.539 6.4374 18.6517 6.26433 18.708 6.07018C18.7644 5.87602 18.7618 5.66952 18.7006 5.47682ZM15.2741 7.5862C15.1301 7.70816 15.0228 7.86765 14.9641 8.04695C14.9053 8.22624 14.8974 8.41832 14.9413 8.60182L15.5124 11.0237L13.342 9.73385C13.1819 9.63836 12.9988 9.58794 12.8124 9.58794C12.6259 9.58794 12.4429 9.63836 12.2827 9.73385L10.1124 11.0159L10.6835 8.59401C10.7279 8.41059 10.7204 8.2184 10.6618 8.039C10.6031 7.85961 10.4957 7.7001 10.3514 7.57839L8.45611 5.96745L10.9631 5.75495C11.1492 5.73934 11.3275 5.67335 11.4789 5.56406C11.6303 5.45478 11.7491 5.30632 11.8225 5.13464L12.8124 2.83151L13.7999 5.13464C13.8734 5.30622 13.9922 5.45459 14.1436 5.56385C14.295 5.67312 14.4732 5.73917 14.6592 5.75495L17.1663 5.96745L15.2741 7.5862ZM6.69205 9.81745L2.31705 14.1924C2.19977 14.3097 2.04071 14.3756 1.87486 14.3756C1.70901 14.3756 1.54995 14.3097 1.43267 14.1924C1.3154 14.0752 1.24951 13.9161 1.24951 13.7503C1.24951 13.5844 1.3154 13.4253 1.43267 13.3081L5.80767 8.93307C5.92495 8.8158 6.08401 8.74991 6.24986 8.74991C6.41571 8.74991 6.57477 8.8158 6.69205 8.93307C6.80932 9.05035 6.87521 9.20941 6.87521 9.37526C6.87521 9.54111 6.80932 9.70017 6.69205 9.81745ZM7.94205 14.1924L3.56705 18.5674C3.50898 18.6255 3.44004 18.6716 3.36417 18.703C3.2883 18.7344 3.20698 18.7506 3.12486 18.7506C3.04274 18.7506 2.96142 18.7344 2.88555 18.703C2.80968 18.6716 2.74074 18.6255 2.68267 18.5674C2.6246 18.5094 2.57854 18.4404 2.54711 18.3646C2.51569 18.2887 2.49951 18.2074 2.49951 18.1253C2.49951 18.0431 2.51569 17.9618 2.54711 17.886C2.57854 17.8101 2.6246 17.7411 2.68267 17.6831L7.05767 13.3081C7.17495 13.1908 7.33401 13.1249 7.49986 13.1249C7.66571 13.1249 7.82477 13.1908 7.94205 13.3081C8.05932 13.4253 8.12521 13.5844 8.12521 13.7503C8.12521 13.9161 8.05932 14.0752 7.94205 14.1924ZM13.567 13.3081C13.6252 13.3661 13.6713 13.435 13.7027 13.5109C13.7342 13.5868 13.7504 13.6681 13.7504 13.7503C13.7504 13.8324 13.7342 13.9137 13.7027 13.9896C13.6713 14.0655 13.6252 14.1344 13.567 14.1924L9.19205 18.5674C9.13398 18.6255 9.06504 18.6716 8.98917 18.703C8.9133 18.7344 8.83198 18.7506 8.74986 18.7506C8.66774 18.7506 8.58642 18.7344 8.51055 18.703C8.43468 18.6716 8.36574 18.6255 8.30767 18.5674C8.2496 18.5094 8.20354 18.4404 8.17211 18.3646C8.14069 18.2887 8.12451 18.2074 8.12451 18.1253C8.12451 18.0431 8.14069 17.9618 8.17211 17.886C8.20354 17.8101 8.2496 17.7411 8.30767 17.6831L12.6827 13.3081C12.7407 13.25 12.8096 13.2039 12.8855 13.1724C12.9614 13.141 13.0427 13.1248 13.1249 13.1248C13.207 13.1248 13.2883 13.141 13.3642 13.1724C13.4401 13.2039 13.509 13.25 13.567 13.3081Z"
                fill="#343330"
              />
            </svg>
            Activate retake course
          </el-button>
        </div>
      </div>
      <div v-else>
        <div class="flex items-center justify-between mb-8">
          <div class="flex flex-col gap-3">
            <h1 class="font-semibold text-xl">Retake course</h1>
            <p class="text-tertiary-600 font-normal">
              Update your company photo and details here.
            </p>
          </div>
        </div>
        <div class="grid grid-cols-5 gap-2">
          <h1 class="font-semibold">Retake course name</h1>
          <h1 class="text-base">{{ course.title }} (retake)</h1>
        </div>
        <el-divider />
        <div class="grid grid-cols-5 gap-2">
          <h1 class="font-semibold">Retake course code</h1>
          <h1 class="text-base">{{ course.retake_code }}</h1>
        </div>
        <el-divider />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, onMounted, reactive, ref } from "vue";
import { FormInstance, FormRules } from "element-plus";
import { useI18n } from "vue-i18n";
import { IAssignedCourse } from "@/models/backend";

const i18n = useI18n();
const emit = defineEmits(["onChange", "activateRetake"]);

const props = defineProps<{
  course: IAssignedCourse;
}>();

const loading = ref(false);
const ruleFormRef = ref<FormInstance>();
const ruleForm = reactive({
  title: "",
  code: "",
});

const rules = reactive<FormRules>({
  title: [
    {
      required: true,
      message: i18n.t("validation.fillField"),
      trigger: "blur",
    },
  ],
  code: [
    {
      type: "string",
      required: true,
      pattern: /^[A-Z]{3}[0-9]{3}$/,
      message: "Ex: ENG111",
    },
  ],
});

onMounted(() => {});
</script>

<style scoped lang="scss"></style>
